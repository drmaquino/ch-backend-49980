"use strict";(self.webpackChunkrecursopasareladepago=self.webpackChunkrecursopasareladepago||[]).push([[482],{1482:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var c=n(4165),r=n(5861),a=n(9439),i=n(2791),s=n(1694),o=n.n(s),l=n(5764),u=n(3473),d=n(1830),p=n.n(d),h=function(e,t,n,c){return p().fire({icon:e,title:t,text:n,timer:3e3,showConfirmButton:!1}).then((function(e){c()}))},f="Stripe_container__bO9Q8",m="Stripe_highlighted__ViBRC",k="Stripe_title__msbud",b="Stripe_productsContainer__G2SNT",v="Stripe_productCard__lHCTa",x="Stripe_genericButton__rT8+m",g="Stripe_buttonPanel__x-qaj",S=n(184),_=function(){var e=(0,l.useStripe)(),t=(0,l.useElements)(),n=function(){var n=(0,r.Z)((0,c.Z)().mark((function n(r){var a,i;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.next=3,e.confirmPayment({elements:t,redirect:"if_required"});case 3:a=n.sent,i=a.error,a.paymentIntent,i?(console.log(i),c="error",s="Error al procesar el pago",o=i.message,p().fire({icon:c,title:s,text:o,timer:3e3,showConfirmButton:!1})):h("success","\xa1Pago completado!","El pago ha sido procesado con \xe9xito",(function(){return window.location.replace("/")}));case 7:case"end":return n.stop()}var c,s,o}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("form",{children:[(0,S.jsx)(l.PaymentElement,{}),(0,S.jsx)("div",{className:g,children:(0,S.jsx)("button",{className:x,onClick:n,children:"Pagar"})})]})})},j=function(e){var t=e.hidden,n=e.children;return t?null:n},E=function(e){var t=e.product,n=e.setCurrentProduct;return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:v,onClick:function(){return n(t.id)},children:[(0,S.jsx)("p",{children:t.name}),(0,S.jsx)("p",{children:t.price})]})})},y=n(9466),Z=n(5671),C=n(1243),P=(0,y.Z)((function e(){(0,Z.Z)(this,e),this.makeGetRequest=function(e){var t=e.url,n=e.config,c=e.callbackSuccess,r=e.callbackError;C.Z.get(t,n).then(c).catch(r)},this.makePostRequest=function(e){var t=e.url,n=e.body,c=e.config,r=e.callbackSuccess,a=e.callbackError;C.Z.post(t,n,c).then(r).catch(a)},this.makePutRequest=function(e){var t=e.url,n=e.body,c=e.config,r=e.callbackSuccess,a=e.callbackError;C.Z.put(t,n,c).then(r).catch(a)},this.makeDeleteRequest=function(e){var t=e.url,n=e.config,c=e.callbackSuccess,r=e.callbackError;C.Z.delete(t,n).then(c).catch(r)}})),w="http://localhost:8080",q="/api/payments",I=(0,y.Z)((function e(){var t=this;(0,Z.Z)(this,e),this.createPaymentIntent=function(e){var n=e.productId,c=e.callbackSuccess,r=e.callbackError,a={url:"".concat(w).concat(q,"/payment-intents?id=").concat(n),callbackSuccess:c,callbackError:r};t.client.makePostRequest(a)},this.pay=function(e){var n=e.body,c=e.callbackSuccess,r=e.callbackError,a={url:"".concat(w).concat(q,"/checkout"),body:n,config:{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0},callbackSuccess:c,callbackError:r};t.client.makePostRequest(a)},this.client=new P})),N=(0,u.J)("AQUI TU PUBLIC KEY DE STRIPE"),R=function(){var e=(0,i.useState)(null),t=(0,a.Z)(e,2),n=t[0],s=t[1],u=(0,i.useState)(null),d=(0,a.Z)(u,2),p=d[0],h=d[1];(0,i.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n),(new I).createPaymentIntent({productId:n,callbackSuccess:v,callbackError:x});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&e()}),[n]);var v=function(e){h(e.data.payload.client_secret)},x=function(e){console.log(e)};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:f,children:(0,S.jsx)("h1",{className:k,children:"Stripe"})}),(0,S.jsxs)("div",{className:o()([f,m]),children:[(0,S.jsx)(j,{hidden:n,children:(0,S.jsx)("div",{className:b,children:[{id:1,name:"papas",price:1e3},{id:2,name:"queso",price:500},{id:3,name:"hamburguesa",price:1500},{id:4,name:"soda",price:1e3},{id:5,name:"golosinas",price:800}].map((function(e){return(0,S.jsx)(E,{product:e,setCurrentProduct:s},e.id)}))})}),(0,S.jsx)(j,{hidden:!p||!N,children:(0,S.jsx)(l.Elements,{stripe:N,options:{clientSecret:p},children:(0,S.jsx)(_,{})})})]})]})}}}]);
//# sourceMappingURL=482.1c9b6fc3.chunk.js.map